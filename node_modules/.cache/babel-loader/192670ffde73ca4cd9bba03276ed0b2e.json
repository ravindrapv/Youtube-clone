{"ast":null,"code":"var _jsxFileName = \"/home/venkataravindra-p-v/MountBlue/React/Youtube-clone/src/context/appContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { auth, db } from \"../lib/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext();\nexport const useAppContext = () => {\n  _s();\n  return useContext(AppContext);\n};\n_s(useAppContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AppContextProvider = ({\n  children\n}) => {\n  _s2();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [appState, setAppState] = useState(\"empty\");\n  const [showUploadVideo, setShowUploadVideo] = useState(false);\n  const [videos, setVideos] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const unsubscribeAuth = auth.onAuthStateChanged(user => {\n      try {\n        if (user) {\n          setAppState(\"home\");\n          setCurrentUser(user);\n          console.log(user);\n        } else {\n          setCurrentUser(null);\n          setAppState(\"login\");\n        }\n      } catch (error) {\n        setError(error.message);\n      }\n    });\n    return () => unsubscribeAuth(); // Cleanup function\n  }, []);\n  useEffect(() => {\n    const unsubscribeVideos = db.collection(\"Videos\").onSnapshot(snapshot => {\n      setVideos(snapshot.docs.map(doc => doc.data()));\n      setIsLoading(false);\n    }, error => {\n      setError(error.message);\n      setIsLoading(false);\n    });\n    return () => unsubscribeVideos(); // Cleanup function\n  }, []);\n  console.log(videos);\n  console.log(currentUser);\n  const value = {\n    videos,\n    appState,\n    currentUser,\n    showUploadVideo,\n    setShowUploadVideo,\n    isLoading,\n    error\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 10\n  }, this);\n};\n_s2(AppContextProvider, \"d/LEeIcU0oXbzk3ogh7xoOY39nY=\");\n_c = AppContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AppContextProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","auth","db","jsxDEV","_jsxDEV","AppContext","useAppContext","_s","AppContextProvider","children","_s2","currentUser","setCurrentUser","appState","setAppState","showUploadVideo","setShowUploadVideo","videos","setVideos","isLoading","setIsLoading","error","setError","unsubscribeAuth","onAuthStateChanged","user","console","log","message","unsubscribeVideos","collection","onSnapshot","snapshot","docs","map","doc","data","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/venkataravindra-p-v/MountBlue/React/Youtube-clone/src/context/appContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\nimport { auth, db } from \"../lib/firebase\";\n\nconst AppContext = createContext();\n\nexport const useAppContext = () => {\n  return useContext(AppContext);\n};\n\nexport const AppContextProvider = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [appState, setAppState] = useState(\"empty\");\n  const [showUploadVideo, setShowUploadVideo] = useState(false);\n  const [videos, setVideos] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const unsubscribeAuth = auth.onAuthStateChanged((user) => {\n      try {\n        if (user) {\n          setAppState(\"home\");\n          setCurrentUser(user);\n          console.log(user);\n        } else {\n          setCurrentUser(null);\n          setAppState(\"login\");\n        }\n      } catch (error) {\n        setError(error.message);\n      }\n    });\n\n    return () => unsubscribeAuth(); // Cleanup function\n  }, []);\n\n  useEffect(() => {\n    const unsubscribeVideos = db.collection(\"Videos\").onSnapshot(\n      (snapshot) => {\n        setVideos(snapshot.docs.map((doc) => doc.data()));\n        setIsLoading(false);\n      },\n      (error) => {\n        setError(error.message);\n        setIsLoading(false);\n      }\n    );\n\n    return () => unsubscribeVideos(); // Cleanup function\n  }, []);\n\n  console.log(videos);\n  console.log(currentUser);\n  const value = {\n    videos,\n    appState,\n    currentUser,\n    showUploadVideo,\n    setShowUploadVideo,\n    isLoading,\n    error,\n  };\n\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}